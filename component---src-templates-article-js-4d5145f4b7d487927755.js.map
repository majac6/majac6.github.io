{"version":3,"file":"component---src-templates-article-js-4d5145f4b7d487927755.js","mappings":"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","sources":["webpack://majac-resume/./src/components/TableOfContents.js","webpack://majac-resume/./src/templates/article.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst TableOfContents = ({ headings }) => {\n  const [activeId, setActiveId] = useState('');\n  const [isClicking, setIsClicking] = useState(false);\n  const clickTimeout = useRef(null);\n  const observer = useRef(null);\n\n  const lastHeadingId = headings?.[headings.length - 1]?.id ?? '';\n\n  useEffect(() => {\n    if (!headings || headings.length === 0) return;\n\n    const handleIntersection = (entries) => {\n      if (isClicking) return;\n\n      const visibleHeadings = entries\n        .filter((entry) => entry.isIntersecting)\n        .map((entry) => ({\n          id: entry.target.id,\n          top: entry.boundingClientRect.top,\n          ratio: entry.intersectionRatio,\n        }));\n\n      if (visibleHeadings.length === 0) return;\n\n      // 가장 많이 보이는 heading 선택\n      const mostVisible = visibleHeadings.sort((a, b) => {\n        if (b.ratio === a.ratio) {\n          return a.top - b.top; // 같으면 화면 상단에 가까운 것\n        }\n        return b.ratio - a.ratio;\n      })[0];\n\n      if (mostVisible && mostVisible.id !== activeId) {\n        setActiveId(mostVisible.id);\n      }\n    };\n\n    const options = {\n      root: null,\n      rootMargin: '0px 0px -60% 0px', // 화면 상단에서 40% 지점 기준\n      threshold: [0.1, 0.25, 0.5, 0.75, 1.0],\n    };\n\n    observer.current = new IntersectionObserver(handleIntersection, options);\n\n    const elements = headings\n      .map(({ id }) => document.getElementById(id))\n      .filter(Boolean);\n\n    elements.forEach((el) => observer.current.observe(el));\n\n    return () => {\n      if (observer.current) {\n        observer.current.disconnect();\n        observer.current = null;\n      }\n    };\n  }, [headings, isClicking, activeId]);\n\n  // 스크롤이 맨 아래 근처에 가면 마지막 heading을 강제로 활성화\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollBottom = window.innerHeight + window.scrollY;\n      const docHeight = document.documentElement.offsetHeight;\n      const margin = 30;\n\n      if (docHeight - scrollBottom <= margin && lastHeadingId !== activeId) {\n        setActiveId(lastHeadingId);\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [lastHeadingId, activeId]);\n\n  const scrollToHeading = (id) => {\n    setIsClicking(true);\n    setActiveId(id);\n    const el = document.getElementById(id);\n    const navHeight = document.querySelector('nav')?.offsetHeight || 0;\n\n    if (el) {\n      const offsetTop = el.getBoundingClientRect().top + window.scrollY - navHeight - 8;\n      window.scrollTo({ top: offsetTop, behavior: 'smooth' });\n    }\n\n    if (clickTimeout.current) clearTimeout(clickTimeout.current);\n    clickTimeout.current = setTimeout(() => {\n      setIsClicking(false);\n    }, 500); // 클릭 후 500ms 동안은 scrollspy 비활성화\n  };\n\n  if (!headings || headings.length === 0) return null;\n\n  return (\n    <nav className=\"border border-card-border rounded-lg p-4 bg-card-bg\">\n      <h3 className=\"text-xs font-semibold mb-3 text-subtle tracking-wide uppercase\">\n        목차\n      </h3>\n      <ul className=\"space-y-1\">\n        {headings.map((heading) => (\n          <li key={heading.id}>\n            <button\n              onClick={() => scrollToHeading(heading.id)}\n              className={`w-full cursor-pointer text-left px-2 py-1 text-2xs transition-colors\n                ${activeId === heading.id\n                  ? 'font-bold text-primary-hover border-primary bg-primary-bg'\n                  : 'text-muted hover:text-primary-hover'}\n              `}\n              style={{ paddingLeft: `${(heading.depth - 2) * 8}px` }}\n            >\n              {heading.value}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nexport default TableOfContents;\n","import React, { useEffect } from 'react';\nimport { graphql, Link } from 'gatsby';\nimport Layout from 'components/Layout';\nimport TableOfContents from 'components/TableOfContents';\n\nconst ArticleTemplate = ({ data, pageContext }) => {\n  const { markdownRemark } = data;\n  const { frontmatter, html, headings } = markdownRemark;\n  const { previous, next } = pageContext;\n\n  useEffect(() => {\n    const handleClick = (e) => {\n      const anchor = e.target.closest('a[href^=\"#\"]');\n      if (!anchor) return;\n  \n      const targetId = decodeURIComponent(anchor.getAttribute('href').substring(1));\n      const targetElement = document.getElementById(targetId);\n      if (targetElement) {\n        e.preventDefault();\n  \n        const nav = document.querySelector('nav');\n        const navHeight = nav?.offsetHeight ?? 0;\n        const offsetTop = targetElement.getBoundingClientRect().top + window.scrollY - navHeight - 8;\n  \n        window.scrollTo({\n          top: offsetTop,\n          behavior: 'smooth',\n        });\n  \n        // 해시도 수동으로 갱신\n        window.history.replaceState(null, '', `#${targetId}`);\n      }\n    };\n  \n    document.addEventListener('click', handleClick);\n    return () => document.removeEventListener('click', handleClick);\n  }, []);\n\n  return (\n    <Layout title={`${frontmatter.title} - Senior Frontend Engineer : HungSun LIM`}>\n      <div className=\"max-w-5xl mx-auto px-2 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-6 gap-8\">\n          {/* 메인 컨텐츠 */}\n          <article className=\"lg:col-span-4\">\n            {/* 아티클 헤더 */}\n            <header className=\"mb-8 border-b border-border-strong pb-4\">\n              <nav className=\"mb-3\">\n                <Link to=\"/articles\" className=\"text-primary hover:underline text-xs font-medium\">\n                  ← Articles\n                </Link>\n              </nav>\n              <h1 className=\"text-2xl font-bold mb-2 tracking-tight\">{frontmatter.title}</h1>\n              <div className=\"flex items-center space-x-3 text-xs text-subtle mb-4\">\n                <time>{frontmatter.date}</time>\n                {frontmatter.tags && frontmatter.tags.length > 0 && (\n                  <div className=\"flex flex-wrap space-x-1 gap-2\">\n                    {frontmatter.tags.map((tag) => (\n                      <span key={tag} className=\"px-2 py-0.5 border border-border bg-surface text-subtle rounded-full text-nowrap\">\n                        {tag}\n                      </span>\n                    ))}\n                  </div>\n                )}\n              </div>\n              {frontmatter.description && <p className=\"text-base text-subtle mb-2\">{frontmatter.description}</p>}\n            </header>\n\n            {/* 아티클 본문 */}\n            <div className=\"prose prose-sm dark:prose-invert max-w-none mb-12\" dangerouslySetInnerHTML={{ __html: html }} />\n\n            {/* 이전/다음 글 네비게이션 */}\n            <nav className=\"pt-8 border-t border-border-strong mt-8\">\n              <div className=\"flex justify-between gap-2\">\n                {previous ? (\n                  <Link\n                    to={`/article/${previous.fields.slug}`}\n                    className=\"flex-1 pr-4 text-left text-xs text-subtle hover:text-primary\">\n                    <div className=\"mb-1\">이전 글</div>\n                    <div className=\"text-primary font-medium truncate\">{previous.frontmatter.title}</div>\n                  </Link>\n                ) : (\n                  <div className=\"flex-1\"></div>\n                )}\n                {next ? (\n                  <Link to={`/article/${next.fields.slug}`} className=\"flex-1 pl-4 text-right text-xs text-subtle hover:text-primary\">\n                    <div className=\"mb-1\">다음 글</div>\n                    <div className=\"text-primary font-medium truncate\">{next.frontmatter.title}</div>\n                  </Link>\n                ) : (\n                  <div className=\"flex-1\"></div>\n                )}\n              </div>\n            </nav>\n          </article>\n\n          {/* 사이드바 - 목차 */}\n          <aside className=\"lg:col-span-2 hidden lg:block\">\n            <div className=\"sticky top-8\">\n              <TableOfContents headings={headings} />\n            </div>\n          </aside>\n        </div>\n\n        {/* space for scrollspy / 30vh */}\n        <div style={{ height: '30vh' }} />\n      </div>\n    </Layout>\n  );\n};\n\nexport const query = graphql`\n  query ($id: String!) {\n    markdownRemark(id: { eq: $id }) {\n      id\n      html\n      frontmatter {\n        title\n        date(formatString: \"YYYY년 MM월 DD일\")\n        description\n        tags\n      }\n      tableOfContents\n      headings {\n        id\n        value\n        depth\n      }\n    }\n  }\n`;\n\nexport default ArticleTemplate;\n"],"names":["_ref","_headings$id","_headings","headings","activeId","setActiveId","useState","isClicking","setIsClicking","clickTimeout","useRef","observer","lastHeadingId","length","id","useEffect","current","IntersectionObserver","entries","visibleHeadings","filter","entry","isIntersecting","map","target","top","boundingClientRect","ratio","intersectionRatio","mostVisible","sort","a","b","root","rootMargin","threshold","_ref2","document","getElementById","Boolean","forEach","el","observe","disconnect","handleScroll","scrollBottom","window","innerHeight","scrollY","documentElement","offsetHeight","addEventListener","removeEventListener","React","className","heading","key","onClick","_document$querySelect","navHeight","querySelector","offsetTop","getBoundingClientRect","scrollTo","behavior","clearTimeout","setTimeout","scrollToHeading","style","paddingLeft","depth","value","data","pageContext","markdownRemark","frontmatter","html","previous","next","handleClick","e","anchor","closest","targetId","decodeURIComponent","getAttribute","substring","targetElement","_nav$offsetHeight","preventDefault","nav","history","replaceState","Layout","title","Link","to","date","tags","tag","description","dangerouslySetInnerHTML","__html","fields","slug","TableOfContents","height"],"sourceRoot":""}